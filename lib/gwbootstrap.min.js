function matchPageTopToNavbar(){jQuery('.fixed-top + .container-fluid').css('padding-top',jQuery('header').height())}function matchFooterHeight(){const $footer=jQuery('.footer');const fpad=$footer.outerHeight()-$footer.height();const newheight=jQuery('.footer > .container').outerHeight();const padtop=parseInt($footer.css('padding-top'),10);const padbottom=parseInt($footer.css('padding-bottom'),10);$footer.height(newheight+fpad);jQuery('body').css('margin-bottom',$footer.outerHeight()+padtop+padbottom)}function matchFloatingButtons(){const $floatBtn=jQuery('.btn-float');const screenWidth=jQuery('header').width();if(screenWidth>=992&&$floatBtn.length>1){$floatBtn.each(function(i){jQuery(this).css('right',`${(90+60*i).toString()}px`)})}}function downloadCSV(csv,filename){const csvFile=new Blob([csv],{type:'text/csv'});const downloadLink=document.createElement('a');downloadLink.download=filename;downloadLink.href=window.URL.createObjectURL(csvFile);downloadLink.style.display='none';document.body.appendChild(downloadLink);downloadLink.click()}function exportTableToCSV(){const csv=[];const filename=jQuery(this).attr('data-filename');const tableId=jQuery(this).attr('data-table-id');jQuery(`#${tableId} > tbody > tr`).each((_i,row)=>{const newrow=[];jQuery(row).children().each((_j,col)=>{newrow.push(jQuery(col).text())});csv.push(newrow.join(','))});downloadCSV(csv.join('\n'),filename)}function showImage(){const captions=JSON.parse(jQuery(this).attr('data-captions'));const tRanges=JSON.parse(jQuery(this).attr('data-t-ranges'));const channelName=jQuery(this).attr('data-channel-name');const imageType=jQuery(this).attr('data-image-type');const imageDir=jQuery(this).attr('data-image-dir');for(let i=0;i<tRanges.length;i+=1){const idBase=`${channelName}_${tRanges[i]}`;const fileName=`${channelName}-${imageType}-${tRanges[i]}.png`;const filePath=`${imageDir}/${fileName}`;jQuery(`#a_${idBase}`).attr('href',filePath);jQuery(`#a_${idBase}`).attr('title',captions[i]);jQuery(`#img_${idBase}`).attr('alt',fileName);jQuery(`#img_${idBase}`).attr('src',filePath)}}jQuery.fn.scrollView=function scrollView(){return this.each(()=>{jQuery('html, body').animate({scrollTop:0},800)})};
jQuery(window).on('load',()=>{matchPageTopToNavbar();matchFooterHeight();matchFloatingButtons()});jQuery(window).resize(()=>{matchPageTopToNavbar();matchFooterHeight();matchFloatingButtons()});jQuery(document).ready(()=>{jQuery('.btn-table').click(exportTableToCSV);jQuery('.image-switch').click(showImage);jQuery('#top-btn').click(function(){jQuery(this).scrollView()});jQuery('.lazy').Lazy({effect:'fadeIn',effectTime:1000,visibleOnly:true,scrollDirection:'vertical',onError:element=>{console.log(`Error loading ${element.data('src')}`)}});jQuery('.fancybox').fancybox({selector:'[data-fancybox="gallery"]',backFocus:false,buttons:['zoom','download','slideShow','thumbs','close'],helpers:{title:{type:'inside'}},width:1200})});
